%h3.mb-2
  = @poll.end_date
%br
- @activity_types.each do |type|
  .mb-4
    %h3
      = type.activity_type
    %table
      %thead
        %tr
          %td
            = t('placeholders.activity_name')
          %td
            = t('votes.number')
          %td 
            = t('buttons.actions')
      %tbody
        - @activities.each do |activity|
          -if activity.activity_type == type.activity_type
            %tr
              %td
                = link_to activity.name, activity_path(activity)
              %td
                = activity.votes.count
              %td
                - if activity.votes.where(user: current_user.id).empty?
                  = link_to t('votes.vote'), poll_activity_votes_path(@poll.id, activity), method: :post
                -else
                  = link_to t('votes.unvote'), poll_activity_vote_path(@poll.id, activity, activity.votes.where(user: current_user.id).first.id), method: :delete, data: { confirm: t('actions.confirm')}
