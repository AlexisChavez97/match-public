.container.center-vertical.polls
  .main-content.medium.mt-5
    %h2.text.red.text-center.mb-5
      =t('labels.vote')
    .mb-2
      %p.message.text-center
        =t('labels.last_day')
      %p.message.text-center
        = @poll.end_date
    %br
    .mb-1
      %table
        %tbody
          - @activity_types.each do |type|
            %tr
              %td{colspan: 3}
                %h2.mb-4
                  = type.activity_type
            %tr
              %td
                = t('placeholders.activity_name')
              %td.text-center
                = t('buttons.actions')
            - @activities.each do |activity|
              -if activity.activity_type == type.activity_type
                %tr
                  %td
                    = link_to activity.name, activity_path(activity)
                  %td.text-center
                    - if @judge_votes.map(&:activity_id).exclude?(activity.id)
                      = link_to '', judge_poll_activity_votes_path(@poll.id, activity), method: :post, class: 'activity-vote'
                    - else
                      = link_to '', judge_poll_activity_vote_path(@poll.id, activity, @judge_votes.where(activity_id: activity.id).first.id), method: :delete, data: { confirm: t('actions.confirm')}, class: 'activity-vote voted'
